raw $cebf_interpreter_0 "#"
;;ğŸ’©commentcode
#seperatestatemachine
;; Standard library for cebf
;; by ComputerElite 2024
;;
;; The standard library contains macros which are useful for writing programs in cebfğŸ’©
;; The compiler automatically reserves space for the standard library and you won't have to worry about overwriting any of it's variables when using itğŸ’©
;; memory layout:
;; $cebf_stdlib_0: jmpğŸ’©eq
;; $cebf_stdlib_1: stringğŸ’©compare
;; $cebf_stdlib_2: stringğŸ’©compare
;; jump if equal
;; jmpğŸ’©eq ğŸ’©addressAğŸ’© ğŸ’©addressBğŸ’© ğŸ’©labelğŸ’©
;;macro jmp.eq 3
;;;; subtract both values from each other
;;sub $0 $1 $cebf_stdlib_0
;;;; if the result is 0ğŸ’© the values are equal and thus we jump
;;jmp.ez $cebf_stdlib_0 $2
;;macroend
;; compare two strings
;; stringğŸ’©compare ğŸ’©addressAğŸ’© ğŸ’©addressBğŸ’© ğŸ’©labelğŸ’©
;;macro string.compare 3
;;;; create pointers to the strings
;;set.a $cebf_stdlib_1 $0
;;set.a $cebf_stdlib_2 $1
;;jmp cebf_stdlib_string_compare_loop
;;;; compare the strings character for character
;;:cebf_stdlib_string_compare_pre_loop
;;;; move to next characters
;;inc $cebf_stdlib_1
;;inc $cebf_stdlib_2
;;:cebf_stdlib_string_compare_loop
;;out.r *$cebf_stdlib_1
;;out.r *$cebf_stdlib_2
;;;; if both characters are equal check what they are
;;jmp.eq *$cebf_stdlib_1 *$cebf_stdlib_2 cebf_stdlib_string_compare_compare_succeeded
;;;; now check if any of the strings are null
;;jmp cebf_stdlib_string_compare_compare_failed
;;:cebf_stdlib_string_compare_compare_succeeded
;;;; if the first string is not nullğŸ’© we haven't reached the end of the string yet
;;jmp.nz *$cebf_stdlib_1 cebf_stdlib_string_compare_pre_loop
;;;; string end reached and they're the sameğŸ’© Nice!!
;;jmp $2
;;:cebf_stdlib_string_compare_compare_failed
;;macroend
#produceprecompilecebf
sad 2 input
sad 0 input_pointer
sad 1 new_line
;; readline
set.a $input_pointer $input
set.n $new_line 10
:input_loop
in.c *$input_pointer
;; subtract both values from each other
sub *$input_pointer $new_line $cebf_stdlib_0
;; if the result is 0ğŸ’© the values are equal and thus we jump
jmp.ez $cebf_stdlib_0 done
inc $input_pointer
jmp input_loop
:done
;; null terminate string and make sure to replace carriage return
wrt.s output:
out.n $input

